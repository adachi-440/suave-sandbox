import { http } from "@flashbots/suave-viem";
import {
  getSuaveWallet,
  TransactionRequestSuave,
  SuaveTxRequestTypes,
} from "@flashbots/suave-viem/chains/utils";

const SUAVE_RPC_URL = "https://rpc.rigil.suave.flashbots.net";
// Change this to a private key with rETH you get from https://faucet.rigil.suave.flashbots.net/
const PRIVATE_KEY = (process.env.PRIVATE_KEY as `0x${string}`) || undefined;

const wallet = getSuaveWallet({
  transport: http(SUAVE_RPC_URL),
  privateKey: PRIVATE_KEY,
});

const ccr: TransactionRequestSuave = {
  confidentialInputs:
    "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000fd7b22626c6f636b4e756d626572223a22307830222c22747873223a5b2230786638363538303064383235323038393461646263653931303332643333396338336463653834316336346566643261393232383165653664383230336538383038343032303131386164613038376337386234353663653762343234386237313565353164326465656236343031363032343832333735663130663037396663666637373934383830653731613035373366336364343133396437323037643165316235623263323365353438623061316361636533373034343739656334653939316362356130623661323930225d2c2270657263656e74223a31307d000000",
  kettleAddress: "0x03493869959C866713C33669cA118E774A30A0E5",
  to: "0x8f21Fdd6B4f4CacD33151777A46c122797c8BF17",
  gasPrice: 10000000000n,
  gas: 420000n,
  type: SuaveTxRequestTypes.ConfidentialRequest,
  chainId: 16813125,
  data: "0x54353f2f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000010000000000000000000000008f21fdd6b4f4cacd33151777a46c122797c8bf170000000000000000000000000000000000000000000000000000000000000000", // Data payload for the transaction
};

const res = await wallet.sendTransaction(ccr);
console.log(`sent ccr! tx hash: ${res}`);
console.log(`https://explorer.rigil.suave.flashbots.net/tx/${res}`);
